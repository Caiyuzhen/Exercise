<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†çª—è§¦å‘äº‹ä»¶</title>
</head>
<body>
    <h1 class="h1">è§†çª—è§¦å‘äº‹ä»¶</h1>
    <h2>å•¦å•¦å•¦</h2>
    <div class="box">æˆ‘æ˜¯è¢«è§‚å¯Ÿå¯¹è±¡</div>
    <p>æˆ‘æ˜¯ä¸€æ®µå†…å®¹æˆ‘æ˜¯ä¸€æ®µå†…å®¹æˆ‘æ˜¯ä¸€æ®µå†…å®¹æˆ‘æ˜¯ä¸€æ®µå†…å®¹æˆ‘æ˜¯ä¸€æ®µå†…å®¹æˆ‘æ˜¯ä¸€æ®µå†…å®¹</p>
    <!-- 
        ä¼ ç»Ÿçš„æ–¹æ³•ï¼š
            Element.getElientBoundRect    è®¡ç®—å…ƒç´ ä¸æµè§ˆå™¨[æ˜¾ç¤ºçª—å£]é¡¶éƒ¨çš„è·ç¦»çš„å·®å€¼,çœ‹æ˜¯å¦ < å…ƒç´ æœ¬èº«çš„é«˜åº¦


        ç°åœ¨çš„æ–¹æ³•ï¼š
            Why?
                å¯¹æ€§èƒ½æŸè€—æ¯”è¾ƒå°

            Whatï¼Ÿ
                 IntersectionObserver       äº¤å‰è§‚å¯Ÿå™¨(æœ¬è´¨æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°)
                ã€è¢«è§‚å¯Ÿå…ƒç´ ã€‘ä¸ã€è§†çª—ã€‘æˆ–è€…ã€çˆ¶çº§å…ƒç´ ã€‘çš„ã€ç›¸äº¤åŒºåŸŸã€‘
                
            How?
                å¯ä»¥å®šä¹‰ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬ ã€root: XXX è¿™é‡Œå®šä¹‰çš„å¯¹è±¡ã€‘ä¸ã€è¢«è§‚å¯Ÿå…ƒç´ ã€‘çš„ã€ç›¸äº¤åŒºåŸŸã€‘
                å¯ä»¥è®¾ç½®ç›¸äº¤çš„æ¯”ä¾‹, æ¯”å¦‚ç›¸äº¤çš„æ¯”ä¾‹æ˜¯ 0.5, å°±æ˜¯è¶…è¿‡å…ƒç´ çš„ä¸€åŠ
 
     -->
    
</body>


<style>
    html{
        overflow-x: hidden;

    }
    body{
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .box {
        width: 200px;
        height: 200px;
        background-color: #000000;
        transform: translateY(1200px);
    }
    p{
        transform: translateY(1400px);
    }
</style>



<script type="text/javascript">

    const box = document.querySelector('.box');

    

// ğŸ‘‡ åˆ›å»ºäº¤å‰è§‚å¯Ÿå™¨
    function callback(entries){ //ä¸€èˆ¬å°±å®šä¹‰ä¸º entries ï¼Œå¦‚æœè¦ä½¿ç”¨ç€å‚æ•°çš„è¯ï¼Œé‚£éœ€è¦å®šä¹‰å¥½è¿™ä¸ª è¡Œå‚ çš„ä½ç½®ï¼Œå› ä¸ºå›è°ƒå‡½æ•°å›è‡ªåŠ¨ä¼ å…¥è¿™ä¸ªå®å‚
        console.log('è¿›å…¥è§†çª—äº†')
        console.log(entries)//ä¼šè¿”å›å›è°ƒå‡½æ•° IntersectionObserverEntry æ•°ç»„å¯¹è±¡

        entries.forEach(item => {
            console.log(item)

            // ğŸŒŸğŸŒŸğŸŒŸ item é‡Œè¾¹åŒ…å«çš„æ•°æ®
                //time                  å¯è§æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªé«˜ç²¾åº¦çš„æ—¶é—´æˆ³ï¼Œç²¾åº¦ä¸ºæ¯«ç§’
                //target                è¢«è´¯å½»ç›®æ ‡å…ƒç´ ï¼Œæ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹å¯¹è±¡
                //rootBounds            æ ¹å…ƒç´ çš„çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯ï¼Œ getBoundingClientRect() æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰æ ¹å…ƒç´ ï¼ˆå³ç›´æ¥ç›¸å¯¹äºè§†å£æ»šåŠ¨ï¼‰
                //boundingClientRect    è¢«è´¯å½»ç›®æ ‡å…ƒç´ çš„çŸ©å½¢äº¤å‰åŒºåŸŸçš„ä¿¡æ¯
                //intersectionRect      äº¤å‰åŒºåŸŸçš„çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯
                //intersectionRatio     ç›®æ ‡å…ƒç´ ä¸äº¤å‰åŒºåŸŸçš„å¯è§æ¯”ä¾‹ï¼ˆå³ intersectionRect å  boundingClientRect çš„æ¯”ä¾‹ï¼‰ï¼Œå®Œå…¨å¯è§æ—¶ä¸º 1ï¼Œå®Œå…¨ä¸å¯è§æ—¶ <= 0
        })
    }



    const options = {
        // root:null, //éœ€è¦è¢«ç›¸äº¤çš„å…ƒç´ ï¼Œæ¯”å¦‚å…ƒç´ çš„çˆ¶çº§ï¼ˆæˆ–å‚ç…§ç›®æ ‡ï¼‰ï¼Œé»˜è®¤è®¾ç½®çš„è¯å°±æ˜¯ä»¥ã€è§†çª—ã€‘ä¸ºç›¸äº¤ç›®æ ‡
        rootMargin:'5px 2% 0px 0px', //è¿™ä¸ªä¸€å®šè¦å¸¦å•ä½! å¯ä»¥æ”¹å˜ç›¸äº¤åŒºåŸŸçš„ä½ç½®(ç›¸å½“äºç»™å®ƒåŠ ä¸Šã€å³ã€ä¸‹ã€å·¦çš„ marginï¼‰ï¼Œä¸€å®šè¦å¸¦å•ä½, å¦‚æœç›¸äº¤ç›®æ ‡æ˜¯æµè§ˆå™¨çª—å£çš„ä¸ºå‚ç…§çš„è¯ï¼Œä¸€å®šè¦å¸¦ç™¾åˆ†æ¯”(ğŸŒŸ-50%å°±æ˜¯çª—å£çš„ä¸€åŠ!)ã€‚ï¼ˆ + æ­£å€¼å‘å¤–å»¶ä¼¸ï¼Œ - è´Ÿå€¼å‘å†…ç¼©å°ï¼‰
        threshold: [0.5,0.75] //ç›¸äº¤çš„æ¯”ä¾‹ï¼ˆ0ï½1ï¼‰çš„èŒƒå›´ï¼Œè¿˜å¯ä»¥ä¼ æ•°ç»„ï¼Œè®¾ç½®å¤šä¸ªæ¯”ä¾‹ï¼Œæ¯”å¦‚[0.2, 0.4, 0.6],æ¯è¾¾åˆ°æŸä¸ªæ¯”ä¾‹çš„è¯éƒ½ä¼šä¿ƒå‘
    }

    const observer = new IntersectionObserver(callback,options) //åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹,ğŸŒŸğŸŒŸé¡ºåºè¦æ”¾åœ¨ä¸‹é¢!!

//ğŸ‘‡è°ƒç”¨è§‚å¯Ÿå™¨
    observer.observe(box) //ç”¨ observer çš„å®ä¾‹å»è°ƒç”¨ observer çš„æ–¹æ³•


</script>


</html>
