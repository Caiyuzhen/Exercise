/*
	WebWorker
		Whatï¼Ÿ
			ğŸš€ å¯ä»¥å®ç°å¤šçº¿ç¨‹
					ä¸€ä¸ª App å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹
						ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ ï¼ˆğŸ”¥æ³¨æ„ ä¸»å­çº¿ç¨‹åªæ˜¯è°åˆ›å»ºè°çš„å…³ç³»ï¼‰

			åŒæºé™åˆ¶
				Worker å¿…é¡»æ˜¯åŒæºçš„ï¼ˆåŒä¸€å°æœåŠ¡å™¨ï¼‰
			
			DOM é™åˆ¶
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ä¸»çº¿ç¨‹ä¸­çš„ window å¯¹è±¡å’Œ document å¯¹è±¡, æ— æ³•è¯»å– DOM
			
			é€šè®¯é™åˆ¶
				Worker ä¸ä¸»çº¿ç¨‹ä¹‹é—´é€šè¿‡ postMessage() è¿›è¡Œé€šä¿¡, é€šè¿‡ onmessage äº‹ä»¶ç›‘å¬æ¶ˆæ¯, å› ä¸ºä¸åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒ

			æ–‡ä»¶é™åˆ¶
				Worker ä¸èƒ½å¤Ÿè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ, å› ä¸ºå®ƒä»¬æ²¡æœ‰è®¿é—®æƒé™

			è„šæœ¬é™åˆ¶
				Worker æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åå°çº¿ç¨‹ï¼Œç‹¬ç«‹äºå½“å‰é¡µé¢çš„ä¸»çº¿ç¨‹ï¼Œä¸”ä¸ä¼šä¸ä¸»çº¿ç¨‹å…±äº«ä½œç”¨åŸŸ
				Worker ä¸èƒ½å¤Ÿè®¿é—®ä¸»çº¿ç¨‹çš„ cookies, localStorage å’Œ IndexedDB æ•°æ®åº“
				Worker ä¸èƒ½å¤Ÿæ‰“å¼€æ–°çš„æµè§ˆå™¨çª—å£, ä¹Ÿä¸èƒ½å¤Ÿè®¿é—®æµè§ˆå™¨çš„åŸç”Ÿç»„ä»¶
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ require() æ–¹æ³•, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ importScripts() æ–¹æ³•åŠ è½½å¤–éƒ¨è„šæœ¬
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨å®šæ—¶å™¨, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ setTimeout() æ–¹æ³•å’Œ setInterval() æ–¹æ³•
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ Sockets, WebRTC, WebSockets, WebAudio, WebGL, WebNotification, WebStorage
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ alert() æ–¹æ³•å’Œ confirm() æ–¹æ³•, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ XMLHttpRequest æˆ– Fetch æ¥å‘é€ HTTP è¯·æ±‚
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ document.write() æ–¹æ³•, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ postMessage() æ–¹æ³•å‘ä¸»çº¿ç¨‹å‘é€æ¶ˆæ¯
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ CSSOM, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ Web Workers API å’Œ DOM æ¥æ“ä½œ DOM
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ window å¯¹è±¡, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ self å¯¹è±¡ä»£æ›¿
				Worker ä¸èƒ½å¤Ÿä½¿ç”¨ importScripts() æ–¹æ³•åŠ è½½æœ¬åœ°æ–‡ä»¶, ä½†æ˜¯å¯ä»¥ä½¿ç”¨ XMLHttpRequest å¯¹è±¡åŠ è½½æœ¬åœ°æ–‡ä»¶

		
		Why?
			Js æ˜¯å•çº¿ç¨‹çš„, ä½¿ç”¨ WebWorker å¯ä»¥å®ç°å¤šçº¿ç¨‹
*/

// ğŸ”¥ä¸»çº¿ç¨‹å†…åˆ›å»ºå­çº¿ç¨‹
const worker = new Worker('./worker.js') //worker çš„ä»£ç ä¼šåœ¨ä¸»çº¿ç¨‹çš„ä»£ç æ‰§è¡Œå®Œåå†æ‰§è¡Œ


console.log('æˆ‘æ˜¯ä¸»çº¿ç¨‹')


worker.addEventListener('message', (e) => { //ç›‘å¬å­çº¿ç¨‹å‘é€æ¥çš„çš„æ¶ˆæ¯
	// æ‰“å°å­çº¿ç¨‹å‘é€æ¥çš„æ¶ˆæ¯
	console.log('æ”¶åˆ°äº†:', e.data)
})


// ğŸ”¥ç»™å­çº¿ç¨‹ä¼ æ•°æ®
worker.postMessage('ä½ å¥½, æˆ‘æ˜¯ä¸»çº¿ç¨‹') //ğŸš€ç»™å­çº¿ç¨‹å‘é€æ¶ˆæ¯
// å¯ä»¥ä¼ é€æ‰€æœ‰æ•°æ®ç±»å‹
worker.postMessage({
	name: 'å°æ˜',
	age: 18
})


// âš¡ï¸ç»ˆç»“ Worker
// worker.terminate() //ç»ˆç»“ Worker
